<!DOCTYPE html>
<html lang="is">

<head>
    <meta name="description" content="Heimasíða Egils" />
    <meta charset="utf-8">
    <title>Heimasíða Egils</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Egill Magnússon" content="">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/verkefni.css">
    <link rel="stylesheet" href="/css/tolvugrafik/main.css">
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition; // Vertex position
    attribute vec3 vNormal;   // Vertex normal

    uniform mat4 uModelMatrix;       // Model transformation matrix
    uniform mat4 uViewMatrix;        // View transformation matrix
    uniform mat4 uProjectionMatrix;  // Projection transformation matrix
    uniform mat3 uNormalMatrix;      // Normal transformation matrix

    uniform vec3 uMousePos;          // Mouse position in world coordinates
    uniform float uOffset;

    varying vec3 fNormal;            // Normal passed to fragment shader
    varying vec3 fragPos;            // Fragment position in world coordinates

    void main() {
        vec4 worldPos = uModelMatrix * vPosition;
        fragPos = vec3(worldPos);

        float distanceToMouse = distance(fragPos, uMousePos);


        float displacementFactor = uOffset;

        if (distanceToMouse < 1.5) {
            displacementFactor = displacementFactor + max(0.0, pow(1.5 - distanceToMouse, 1.0));
        }

        // Displace the vertex along its normal
        vec3 displacedPos = fragPos + displacementFactor * normalize(uNormalMatrix * vNormal);

        // Pass the displaced position through the transformation pipeline
        gl_Position = uProjectionMatrix * uViewMatrix * vec4(displacedPos, 1.0);

        // Pass the normal to the fragment shader
        fNormal = normalize(uNormalMatrix * vNormal);
    }

    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;

        uniform vec3 uLightPosition;
        uniform vec3 uLightAmbient;
        uniform vec3 uLightDiffuse;
        uniform vec3 uLightSpecular;

        uniform vec3 uMaterialAmbient;
        uniform vec3 uMaterialDiffuse;
        uniform vec3 uMaterialSpecular;
        uniform float uShininess;

        varying vec3 fNormal;
        varying vec3 fragPos;

        void main() {
            vec3 ambient = uLightAmbient * uMaterialAmbient;

            vec3 norm = normalize(fNormal);
            vec3 lightDir = normalize(uLightPosition - fragPos);
            float diff = max(dot(norm, lightDir), 0.0);
            vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);

            vec3 viewDir = normalize(-fragPos);
            vec3 reflectDir = reflect(-lightDir, norm);
            float spec = pow(max(dot(viewDir, reflectDir), 0.0), uShininess);
            vec3 specular = uLightSpecular * (spec * uMaterialSpecular);

            vec3 result = ambient + diffuse + specular;
            gl_FragColor = vec4(result, 1.0);
        }
    </script>
    <script type="text/javascript" src="/js/tolvugrafik/Common/MV.js"></script>
    <script type="text/javascript" src="/js/tolvugrafik/Common/webgl-utils.js"></script>
    <script type="text/javascript" src="/js/tolvugrafik/Common/initShaders.js"></script>
    <script src="/js/tolvugrafik/v3/frog.js"></script>
    <script src="/js/tolvugrafik/v3/car.js"></script>
    <script src="/js/tolvugrafik/v3/fly.js"></script>
    <script src="/js/tolvugrafik/v3/objUtils.js"></script>
    <script src="/js/tolvugrafik/prof-testing/frog.js"></script>
</head>

<body>
    <header class="header">
        <a href="#" class="logo" id="log">3D <span>Frog</span></a>
        <i class='bx bx-menu' id="menu-icon"></i>
        <nav class="navbar">
            <a href="/#heim">Heim</a>
            <a href="/#um-mig">Um mig</a>
            <a href="/#verkefni">Verkefni</a>
        </nav>
    </header>
    <div id="top">
    </div>
    <div class="project-container">
        <div class="fractal-container" id="worley">
            <canvas id="gl-canvas" width="512" height="512"></canvas>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-text">
            <p>&copy; 2025 Egill Magnússon | Vefsíða í vinnslu</p>
        </div>
        <div class="footer-iconTop">
            <a href="#top"><i class='bx bx-up-arrow-alt'></i></a>
        </div>
    </footer>
</body>

</html>